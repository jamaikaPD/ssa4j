<project name="ssa4j" basedir=".." default="make-dist">

	<property name="version" value="0.7.0" />
	<property name="jar.name" value="${ant.project.name}-${version}.jar" />

	<import file="../../Shared/build-common.xml" />
		
	<path id="build.classpath">
		<path refid="ivy.libs.path"/>
	</path>
	
	<target name="make-dist" depends="ivy-resolve, compile, make-jar">
		<zip destfile="${dist.dir}/${ant.project.name}-${version}-with-deps.zip">
			<zipfileset dir="${dist.dir}">
				<include name="*.jar"/>
			</zipfileset>
			<zipfileset dir="${basedir}">
				<include name="${lib.dir}/**/*.jar"/>
			</zipfileset>
			<zipfileset dir="${build.dir}">
				<include name="*.ivy"/>
			</zipfileset>
		</zip>
	</target>
	
	<target name="gen-schema">
		<taskdef name="schemagen" classname="com.sun.tools.jxc.SchemaGenTask">
		  <classpath refid="build.classpath"/>
		</taskdef>
		<delete>
			<fileset dir="schemas">
				<include name="*.xsd"/>
			</fileset>
		</delete>
		<schemagen destdir="schemas" srcdir="${source.dir}/org/ssa4j/mock/schema">
			<schema namespace="http://schemas.mobuser.com/ssa4jmock" file="ssa4jmock.xsd"/>
		</schemagen>

	</target>

</project>